{
  "name": "hartran-linkedin-article",
  "nodes": [
    {
      "parameters": {},
      "id": "trigger-manual",
      "name": "üöÄ D√©clencheur Manuel",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [250, 300]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "getAll",
        "databaseId": {
          "__rl": true,
          "value": "507bd4507b644b78b44d4ceeb809f1e0",
          "mode": "id"
        },
        "filterType": "manual",
        "conditions": {
          "conditions": [
            {
              "key": "Statut",
              "condition": "equals",
              "value": "Non trait√©"
            }
          ]
        },
        "sort": {
          "sortValue": [
            {
              "key": "Priorit√©",
              "type": "select",
              "direction": "descending"
            }
          ]
        },
        "limit": 1,
        "options": {}
      },
      "id": "notion-get-ideas",
      "name": "üì• R√©cup√©rer Id√©e Non Trait√©e",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [450, 300]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Effectue une recherche approfondie sur le sujet suivant pour un article LinkedIn professionnel:\n\nTitre: {{ $json.properties['Titre'].title[0].plain_text }}\n\nContexte et sources: {{ $json.properties['Contexte et sources'].rich_text[0].plain_text }}\n\nRecherche les derni√®res actualit√©s, statistiques, √©tudes de cas, et innovations sur ce sujet. Fournis des donn√©es concr√®tes et v√©rifiables.",
        "options": {
          "systemMessage": "Tu es un expert en recherche d'informations sur les sujets de web analyse et data analyse. Tu dois effectuer une recherche approfondie et fournir des informations actuelles, des statistiques, des tendances et des exemples concrets. Utilise tes capacit√©s de recherche web pour trouver les informations les plus r√©centes et pertinentes."
        }
      },
      "id": "perplexity-agent",
      "name": "üîç Agent Recherche Perplexity",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [650, 300]
    },
    {
      "parameters": {
        "model": "perplexity/sonar-pro",
        "options": {}
      },
      "id": "perplexity-model",
      "name": "Perplexity Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [650, 500]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=R√©dige un article LinkedIn professionnel bas√© sur les informations suivantes:\n\nSujet: {{ $('üì• R√©cup√©rer Id√©e Non Trait√©e').item.json.properties['Titre'].title[0].plain_text }}\n\nNotes personnelles: {{ $('üì• R√©cup√©rer Id√©e Non Trait√©e').item.json.properties['Notes personnelles'].rich_text[0]?.plain_text || 'Aucune note sp√©cifique' }}\n\nQuestion √† adresser: {{ $('üì• R√©cup√©rer Id√©e Non Trait√©e').item.json.properties['Question √† adresser'].rich_text[0]?.plain_text || 'Aucune question sp√©cifique' }}\n\nRecherche effectu√©e:\n{{ $json.output }}\n\nConsignes:\n- Article de 800-1200 mots\n- Structure avec une accroche forte\n- D√©veloppement avec exemples concrets\n- Insights pratiques et actionnables\n- Conclusion avec appel √† l'action\n- Ton professionnel mais accessible\n- Int√®gre l'angle d√©fini dans les notes personnelles et questions si fourni",
        "options": {
          "systemMessage": "Tu es un expert en r√©daction d'articles LinkedIn professionnels sur des sujets de web analyse et data analyse. Tu r√©diges des articles engageants avec une structure claire et des insights pratiques. Tu adaptes ton angle √©ditorial en fonction des notes personnelles et questions fournies."
        }
      },
      "id": "claude-agent",
      "name": "‚úçÔ∏è Agent R√©daction Claude",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [850, 300]
    },
    {
      "parameters": {
        "model": "claude-3-5-sonnet-20241022",
        "options": {}
      },
      "id": "claude-model",
      "name": "Claude Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.2,
      "position": [850, 500]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=G√©n√®re exactement 10 hashtags pertinents pour cet article LinkedIn:\n\n{{ $json.output }}\n\nRetourne uniquement les hashtags s√©par√©s par des espaces, sans num√©rotation ni autre texte. M√©lange hashtags populaires et sp√©cialis√©s dans le domaine de l'analytics et du data.",
        "options": {
          "systemMessage": "Tu es un expert en marketing LinkedIn. Tu g√©n√®res des hashtags optimis√©s pour maximiser la visibilit√© des articles."
        }
      },
      "id": "openai-agent",
      "name": "üè∑Ô∏è Agent Hashtags GPT",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [1050, 300]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4",
          "mode": "list"
        },
        "options": {}
      },
      "id": "openai-model",
      "name": "OpenAI Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [1050, 500]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Sauvegarde cet article dans la base de donn√©es Notion (ID: 9b915f4f6bae479f9326ff2cfdabadd3).\n\nTitre de l'article: {{ $('üì• R√©cup√©rer Id√©e Non Trait√©e').item.json.properties['Titre'].title[0].plain_text }}\n\nContenu de l'article:\n{{ $('‚úçÔ∏è Agent R√©daction Claude').item.json.output }}\n\nHashtags: {{ $input.item.json.output }}\n\nDate de g√©n√©ration: {{ $now }}\n\nID de l'id√©e source: {{ $('üì• R√©cup√©rer Id√©e Non Trait√©e').item.json.id }}\n\nUtilise l'outil Notion pour cr√©er une nouvelle page dans la base de donn√©es. Assure-toi de bien mapper:\n- Le titre dans la propri√©t√© 'Titre'\n- Le contenu dans le corps de la page\n- Les hashtags dans la propri√©t√© correspondante si elle existe\n- La date de g√©n√©ration\n- La relation avec l'id√©e source\n\nR√©ponds avec un message de confirmation une fois la page cr√©√©e.",
        "options": {
          "systemMessage": "Tu es un assistant qui g√®re la sauvegarde d'articles dans Notion. Tu dois cr√©er une nouvelle page dans la base de donn√©es sp√©cifi√©e avec toutes les informations fournies. Utilise l'API Notion ou les outils MCP Notion disponibles pour effectuer cette t√¢che."
        }
      },
      "id": "notion-save-agent",
      "name": "üíæ Agent IA - Sauvegarder Article",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [1250, 300]
    },
    {
      "parameters": {
        "model": "claude-3-sonnet-20240229",
        "options": {}
      },
      "id": "claude-save-model",
      "name": "Claude Save Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.2,
      "position": [1250, 500]
    },
    {
      "parameters": {},
      "id": "notion-tool",
      "name": "Notion Tool",
      "type": "@n8n/n8n-nodes-langchain.toolNotionPage",
      "typeVersion": 1,
      "position": [1250, 600]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "update",
        "pageId": {
          "__rl": true,
          "value": "={{ $('üì• R√©cup√©rer Id√©e Non Trait√©e').item.json.id }}",
          "mode": "id"
        },
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "Statut",
              "select": "Trait√©"
            },
            {
              "key": "Date de traitement",
              "date": "={{ $now }}"
            }
          ]
        },
        "options": {}
      },
      "id": "notion-update-idea",
      "name": "‚úÖ Marquer Id√©e Trait√©e",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [1450, 300]
    }
  ],
  "connections": {
    "üöÄ D√©clencheur Manuel": {
      "main": [[{"node": "üì• R√©cup√©rer Id√©e Non Trait√©e", "type": "main", "index": 0}]]
    },
    "üì• R√©cup√©rer Id√©e Non Trait√©e": {
      "main": [[{"node": "üîç Agent Recherche Perplexity", "type": "main", "index": 0}]]
    },
    "üîç Agent Recherche Perplexity": {
      "main": [[{"node": "‚úçÔ∏è Agent R√©daction Claude", "type": "main", "index": 0}]]
    },
    "Perplexity Model": {
      "ai_languageModel": [[{"node": "üîç Agent Recherche Perplexity", "type": "ai_languageModel", "index": 0}]]
    },
    "‚úçÔ∏è Agent R√©daction Claude": {
      "main": [[{"node": "üè∑Ô∏è Agent Hashtags GPT", "type": "main", "index": 0}]]
    },
    "Claude Model": {
      "ai_languageModel": [[{"node": "‚úçÔ∏è Agent R√©daction Claude", "type": "ai_languageModel", "index": 0}]]
    },
    "üè∑Ô∏è Agent Hashtags GPT": {
      "main": [[{"node": "üíæ Agent IA - Sauvegarder Article", "type": "main", "index": 0}]]
    },
    "OpenAI Model": {
      "ai_languageModel": [[{"node": "üè∑Ô∏è Agent Hashtags GPT", "type": "ai_languageModel", "index": 0}]]
    },
    "üíæ Agent IA - Sauvegarder Article": {
      "main": [[{"node": "‚úÖ Marquer Id√©e Trait√©e", "type": "main", "index": 0}]]
    },
    "Claude Save Model": {
      "ai_languageModel": [[{"node": "üíæ Agent IA - Sauvegarder Article", "type": "ai_languageModel", "index": 0}]]
    },
    "Notion Tool": {
      "ai_tool": [[{"node": "üíæ Agent IA - Sauvegarder Article", "type": "ai_tool", "index": 0}]]
    }
  },
  "settings": {"executionOrder": "v1"}
}